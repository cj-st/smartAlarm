<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\tomtom\controls\FindLocationControl.js - TomTom JavaScript SDK</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http://www.tomtom.com/global/images/tomtom-logo_tcm166-3340.png" title="TomTom JavaScript SDK"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 2.1.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/L.Control.Pan.html">L.Control.Pan</a></li>
            
                <li><a href="../classes/L.Control.ZoomSlider.html">L.Control.ZoomSlider</a></li>
            
                <li><a href="../classes/tomtom.AjaxUtil.html">tomtom.AjaxUtil</a></li>
            
                <li><a href="../classes/tomtom.Animation.html">tomtom.Animation</a></li>
            
                <li><a href="../classes/tomtom.controls.AutoComplete.html">tomtom.controls.AutoComplete</a></li>
            
                <li><a href="../classes/tomtom.controls.ContextMenu.html">tomtom.controls.ContextMenu</a></li>
            
                <li><a href="../classes/tomtom.controls.FindLocationControl.html">tomtom.controls.FindLocationControl</a></li>
            
                <li><a href="../classes/tomtom.controls.PanZoomBar.html">tomtom.controls.PanZoomBar</a></li>
            
                <li><a href="../classes/tomtom.controls.RouteControl.html">tomtom.controls.RouteControl</a></li>
            
                <li><a href="../classes/tomtom.controls.RoutePlannerControl.html">tomtom.controls.RoutePlannerControl</a></li>
            
                <li><a href="../classes/tomtom.controls.TabContainer.html">tomtom.controls.TabContainer</a></li>
            
                <li><a href="../classes/tomtom.CustomDivIcon.html">tomtom.CustomDivIcon</a></li>
            
                <li><a href="../classes/tomtom.CustomMarker.html">tomtom.CustomMarker</a></li>
            
                <li><a href="../classes/tomtom.dom.DomUtil.html">tomtom.dom.DomUtil</a></li>
            
                <li><a href="../classes/tomtom.dom.DomUtilResult.html">tomtom.dom.DomUtilResult</a></li>
            
                <li><a href="../classes/tomtom.layers.MapLayer.html">tomtom.layers.MapLayer</a></li>
            
                <li><a href="../classes/tomtom.layers.TrafficIncidentLayer.html">tomtom.layers.TrafficIncidentLayer</a></li>
            
                <li><a href="../classes/tomtom.layers.TrafficLayer.html">tomtom.layers.TrafficLayer</a></li>
            
                <li><a href="../classes/tomtom.layers.WMSLayer.html">tomtom.layers.WMSLayer</a></li>
            
                <li><a href="../classes/tomtom.LocaleManager.html">tomtom.LocaleManager</a></li>
            
                <li><a href="../classes/tomtom.Main.html">tomtom.Main</a></li>
            
                <li><a href="../classes/tomtom.Map.html">tomtom.Map</a></li>
            
                <li><a href="../classes/tomtom.Marker.html">tomtom.Marker</a></li>
            
                <li><a href="../classes/tomtom.MarkerManager.html">tomtom.MarkerManager</a></li>
            
                <li><a href="../classes/tomtom.services.GeocodingService.html">tomtom.services.GeocodingService</a></li>
            
                <li><a href="../classes/tomtom.services.HDTRegionsService.html">tomtom.services.HDTRegionsService</a></li>
            
                <li><a href="../classes/tomtom.services.InitializeService.html">tomtom.services.InitializeService</a></li>
            
                <li><a href="../classes/tomtom.services.LegacyGeocodingService.html">tomtom.services.LegacyGeocodingService</a></li>
            
                <li><a href="../classes/tomtom.services.RoutingService.html">tomtom.services.RoutingService</a></li>
            
                <li><a href="../classes/tomtom.services.TrafficService.html">tomtom.services.TrafficService</a></li>
            
                <li><a href="../classes/tomtom.services.ViewportService.html">tomtom.services.ViewportService</a></li>
            
                <li><a href="../classes/tomtom.StringBundle.html">tomtom.StringBundle</a></li>
            
                <li><a href="../classes/tomtom.TrafficMarker.html">tomtom.TrafficMarker</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src\tomtom\controls\FindLocationControl.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
define([
  &quot;../dom/DomUtil&quot;,
  &quot;../services/GeocodingService&quot;,
  &quot;../Utils&quot;,
  &quot;../Marker&quot;,
  &quot;text!../templates/controls/FindLocationControl.html&quot;
], function (du, GeocodingService, utils, Marker, template) {

  tomtom.controls.FindLocationControl = L.Class.extend({

    includes: L.Mixin.Events,

    /**
     * A control which can be used to search for locations throughout the world using TomTom&#x27;s global geocoding technology.
     * When the user executes a search, the map that was supplied to the constructor options will be updated to show the user&#x27;s search result.
     * If more than one result is returned, the user will be given a choice as a list of locations.
     * @constructor
     * @class FindLocationControl
     * @namespace tomtom.controls
     * @param {Object} options Configuration options for the FindLocationControl.
     * @param {L.Map} options.map The map that the find control should manage.
     * @param {String | DOM Node} options.domNode The DOM node that will
     */
    initialize: function (options) {

      var bundle = new tomtom.StringBundle(&quot;Controls&quot;);

      // set up the node
      this._domNode = du.create(L.DomUtil.get(options.domNode));
      this._domNode.addClass(&quot;tt-find-location-control&quot;);
      this._domNode.html(L.Util.template(template, {
        findLocation: bundle.getString(&quot;button_find&quot;),
        didYouMean: bundle.getString(&quot;did_you_mean&quot;)
      }));

      // get the text box
      this._locationText = this._domNode.find(&quot;.tt-find-location-search input&quot;);

      // get the search button
      this._findButton = this._domNode.find(&quot;.tt-find-location-search button&quot;);

      this._results = this._domNode.find(&quot;.tt-find-location-results&quot;);

      this._locationText.on(&quot;keyup&quot;, this._locationKeyUp, this);
      this._findButton.on(&quot;click&quot;, this._geocode, this);

      this._map = options.map;

      if (this._map === null || this._map === undefined) {
        throw &quot;The map option of the FindLocationControl is required.&quot;;
      } else {

        // create a layer for the geocoded markers
        this._markers = new L.LayerGroup().addTo(this._map);

      }

    },

    clearMarkers: function () {

      this._markers.clearLayers();

    },

    _geocode: function () {

      var geocoder = this._map.geocodingService;

      geocoder.geocode(this._locationText.val(), L.Util.bind(function (response) {

        var geoResponse = response.geoResponse;
        var geoResult = null;

        if (geoResponse &amp;&amp; (geoResult = geoResponse.geoResult)) {

          if (utils.isArray(geoResult)) {

            // show the first result on the map
            this._displayGeocode(geoResult[0]);
            // show the list of the other results
            this._displayResults(geoResult);

          } else {

            this._displayGeocode(geoResult);
            this._results.css(&quot;display&quot;, &quot;none&quot;);

          }

        }

      }, this));

    },

    _displayGeocode: function (geoResult) {

      // center the map
      this._map.setView([geoResult.latitude, geoResult.longitude], MAP_VIEW_ZOOM);

      this.clearMarkers();

      // add a marker
      new Marker([geoResult.latitude, geoResult.longitude]).addTo(this._markers);

    },

    _displayResults: function (results) {
      /*jshint -W107*/
      results.forEach(function (geo, index) {

        if (index === 0) {

          this._domNode.find(&quot;.tt-find-location-match&quot;).html(geo.formattedAddress);

        } else {

          var li = du.create(&quot;li&quot;);
          var link = du.create(&quot;a&quot;);

          li.append(link);
          link.html(geo.formattedAddress);
          link.attr(&quot;href&quot;, &quot;javascript:void(0);&quot;);
          link.on(&quot;click&quot;, function () {
            this._displayGeocode(geo);
          }, this);

          this._domNode.find(&quot;.tt-find-location-alt ul&quot;).append(li);

        }

      }, this);

      this._results.css(&quot;display&quot;, &quot;block&quot;);

    },

    _locationKeyUp: function (e) {

      var key = e.keyCode ? e.keyCode : e.which;

      if (key == 13) {
        this._geocode();
      }

    }

  });

  var MAP_VIEW_ZOOM = 12;

  return tomtom.controls.FindLocationControl;

});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
